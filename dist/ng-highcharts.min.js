/**
 * ng-highcharts
 * @version v0.1.0 - 2014-06-25
 * @link https://github.com/bielversallini/ng-highcharts
 * @author Gabriel Barbosa <gabriel@versallini.com.br>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(){"use strict";angular.module("ngHighcharts",[]),angular.module("ngHighcharts").directive("highchart",function(highchart){return{restrict:"AE",replace:!0,template:"<div></div>",scope:{data:"=",options:"="},link:function(scope,element,attrs){var type="line",title="",subtitle="",xAxisTitle="",yAxisTitle="",xAxisCategories=[],series=[],height=600,chartOptions={};attrs.type&&(type=attrs.type.toLowerCase()),attrs.title&&(title=attrs.title),attrs.subtitle&&(subtitle=attrs.subtitle),attrs.xTitle&&(xAxisTitle=attrs.xTitle),attrs.yTitle&&(yAxisTitle=attrs.yTitle),attrs.categories&&(xAxisCategories=attrs.categories),attrs.height&&(height=eval(attrs.height)),angular.extend(chartOptions,highchart.defaultOptions(),scope.options),chartOptions&&(chartOptions.chart.type=type,chartOptions.title.text=title,chartOptions.subtitle.text=subtitle,chartOptions.xAxis.title.text=xAxisTitle,chartOptions.yAxis.title.text=yAxisTitle,chartOptions.chart.height=height),scope.$watch("data",function(val){for(var temp=[],i=0;i<val.length;i++){var item=val[i][attrs.categoryField];(0==xAxisCategories.length||xAxisCategories.indexOf(item)<0)&&xAxisCategories.push(item);var obj={};obj.name=val[i][attrs.displayName],obj.data=[];for(var j=0;j<val.length;j++)if(obj.name==val[j][attrs.displayName]){var value=val[j][attrs.yField];obj.data.push(value)}(0==series.length||temp.indexOf(obj.name)<0)&&(temp.push(obj.name),series.push(obj))}chartOptions.xAxis.categories=eval(xAxisCategories),chartOptions&&chartOptions.series&&(chartOptions.series=series,element.highcharts(chartOptions))})}}}),angular.module("ngHighcharts").factory("highchart",function(){return{defaultOptions:function(){return{chart:{animation:!0,type:""},title:{text:""},subtitle:{text:""},credits:{enabled:!1},legend:{labelFormat:"{name}"},series:[],xAxis:{categories:[],title:{text:""}},yAxis:{categories:null,title:{text:""}}}}}})}();